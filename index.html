fetch logs
| filter matchesValue(index, "idx_chatbot_grp_preprod")
| parse content, "JSON:json"
| fieldsAdd
    service  = toString(json[service]),
    logpoint = toString(json[logpoint]),
    headers  = json[headers]
| filter matchesValue(json[component], "chatbot-ms")
  AND (matchesValue(logpoint, "request-out") OR matchesValue(logpoint, "response-out"))

/* Flatten headers into dynamic columns (one per key) */
| fieldsFlatten headers, prefix:"h.", depth: 1

/* Merge into one row per service+logpoint, dynamically for ALL header keys */
| summarize takeAny(*) by:{service, logpoint}


# ğŸ“¦ dxlclient â€“ Java Client Generation Guide

This document explains how to generate the **dxlclient Java JAR** using Swagger Codegen.

---

## ğŸš€ Generate Java Client

Run the following command:

```bash
java -jar swagger-codegen-cli-3.0.67.jar generate \\
  -i groupchatbotplatform_global_chatbot_platform_api-2.0.0-swagger.yaml \\
  -l java \\
  -o dxlclient \\
  -c config.json
```

---

## ğŸ§¾ Command Explanation (Simple)

| Option | Meaning |
|--------|----------|
| `java -jar` | Runs the Swagger Codegen tool |
| `swagger-codegen-cli-3.0.67.jar` | Swagger Codegen CLI tool |
| `generate` | Generates client code |
| `-i` | Input Swagger/OpenAPI YAML file |
| `-l java` | Generate code in Java |
| `-o dxlclient` | Output folder name |
| `-c config.json` | Custom configuration file (packages, version, etc.) |

---

## âš™ï¸ Configuration File (`config.json`)

```json
{
  "groupId": "group.buddy.dxlclient",
  "artifactId": "group.buddy.dxlclient",
  "artifactVersion": "2.0.0",
  "apiPackage": "dxlApi",
  "modelPackage": "dxlModel",
  "invokerPackage": "dxlInvoker"
}
```

---

## ğŸ— Build the JAR

After generation:

```bash
cd dxlclient
mvn clean install
```

The generated JAR will be available in:

```
dxlclient/target/
```

Example:

```
group.buddy.dxlclient-2.0.0.jar
```

---

## ğŸ” Compatibility Check (Simple)

Before replacing the existing `dxlclient` JAR:

- Keep same `groupId` and `artifactId`
- Do not change package names (`dxlApi`, `dxlModel`, `dxlInvoker`)
- Do not remove or rename existing API methods
- Do not change existing model field types
- Update version properly (e.g., `2.0.0 â†’ 2.0.1` for minor changes)

Test by replacing the JAR in one service and running:

```bash
mvn clean install
```

If build and tests pass, the new JAR is compatible.

---

## ğŸ“Œ Summary

1. Reads the Swagger YAML file  
2. Generates Java client code  
3. Builds a reusable JAR  
4. Verifies compatibility before release  
"""


## ğŸ” Compatibility Recommendation

For better compatibility, it is recommended to:

- Compare the newly generated code with the existing `dxlclient` source code.
- Identify only the actual API or model changes.
- Manually update the required changes in the existing project instead of fully replacing it.
- Preserve existing package structure and method signatures.
- Avoid unnecessary regeneration changes (formatting, dependency updates, etc.).

### âœ… Recommended Approach

1. Generate the new client in a separate folder.
2. Compare it with the current `dxlclient` code (using Git diff or IDE compare tool).
3. Apply only required API/model updates to the existing project.
4. Rebuild and test.
5. Release with proper version increment.

This approach ensures:
- Backward compatibility  
- Controlled changes  
- No unexpected breaking changes in dependent services  
